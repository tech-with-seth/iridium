# ============================================================================
# TWS Foundations - Environment Variables
# ============================================================================
# Copy this file to `.env` and fill in your actual values.
# NEVER commit `.env` to version control!

# ============================================================================
# DATABASE
# ============================================================================

# PostgreSQL connection string
# Format: postgresql://[username]:[password]@[host]:[port]/[database]
# Example: postgresql://postgres:password@localhost:5432/tws_foundations
# Local development: Install PostgreSQL or use Docker
# Production: Use Railway, Supabase, or any PostgreSQL provider
DATABASE_URL="postgresql://username:password@localhost:5432/tws_foundations"

# ============================================================================
# BETTER AUTH (Authentication)
# ============================================================================

# Secret key for signing cookies and tokens (REQUIRED)
# MUST be at least 32 characters
# Generate with: openssl rand -base64 32
# CRITICAL: Use different secrets for dev/staging/production!
BETTER_AUTH_SECRET="your-super-secret-key-here-must-be-32-chars-min"

# Base URL where your app is hosted (REQUIRED)
# Local dev: http://localhost:5173 (matches Vite dev server)
# Production: https://yourdomain.com (no trailing slash)
# Used for: OAuth redirects, email verification links, cookie domain
BETTER_AUTH_URL="http://localhost:5173"

# ============================================================================
# OPENAI (AI Integration)
# ============================================================================

# OpenAI API key for GPT models (OPTIONAL - required if using AI features)
# Get from: https://platform.openai.com/api-keys
# Format: sk-proj-... (starts with "sk-")
# Used in: app/lib/ai.ts for OpenAI client
# Note: Keep this secret! AI calls cost money based on usage.
OPENAI_API_KEY="sk-proj-your-openai-api-key-here"

# ============================================================================
# POSTHOG (Analytics & Feature Flags)
# ============================================================================
# Optional - Comment out if not using PostHog

# PostHog project API key (PUBLIC - safe to expose in client)
# Get from: PostHog Project Settings > API Keys
# Format: phc_... (starts with "phc_")
# Prefix: VITE_ makes it available to client-side code
# Used for: Event tracking, session recording, feature flags
VITE_POSTHOG_API_KEY="phc_your-posthog-project-api-key"

# PostHog ingestion endpoint (PUBLIC)
# US Cloud: https://us.i.posthog.com (default)
# EU Cloud: https://eu.i.posthog.com (GDPR compliance)
# Self-hosted: https://your-posthog-instance.com
VITE_POSTHOG_HOST="https://us.i.posthog.com"

# PostHog Personal API key for server-side operations (PRIVATE)
# Get from: PostHog Settings > Personal API Keys
# Used in: app/models/feature-flags.server.ts for fetching flags server-side
# Note: Keep this secret! Has access to all PostHog data.
POSTHOG_PERSONAL_API_KEY="phx_your-personal-api-key"

# PostHog Project ID (PUBLIC)
# Get from: PostHog Project Settings > Project ID
# Used for: Server-side PostHog Node.js client
VITE_POSTHOG_PROJECT_ID="12345"

# ============================================================================
# POLAR (Billing & Subscriptions)
# ============================================================================
# Optional - Comment out if not using Polar

# Polar access token for API access (PRIVATE)
# Get from: https://polar.sh/settings/api (after creating organization)
# Format: polar_at_... (starts with "polar_at_")
# Used for: Creating checkouts, managing subscriptions, webhooks
# Note: Keep this secret! Has full access to your Polar organization.
POLAR_ACCESS_TOKEN="polar_at_your-access-token-here"

# Polar server environment (REQUIRED if using Polar)
# Development: "sandbox" (test mode, no real charges)
# Production: "production" (real payments)
# CRITICAL: Always use "sandbox" in development!
POLAR_SERVER="sandbox"

# Polar webhook secret for signature verification (PRIVATE)
# Get from: Polar Organization Settings > Webhooks > Create Webhook
# Endpoint: https://yourdomain.com/api/auth/polar/webhooks
# Format: Any string (Polar generates this when you create webhook)
# Used for: Verifying webhook authenticity in BetterAuth plugin
# Note: Keep this secret! Without it, anyone could send fake webhooks.
POLAR_WEBHOOK_SECRET="your-polar-webhook-secret-from-polar-dashboard"

# ============================================================================
# DEVELOPMENT NOTES
# ============================================================================
# 1. Copy this file: cp .env.example .env
# 2. Fill in real values in .env (never commit .env!)
# 3. Restart dev server after changing .env
# 4. VITE_ prefix: Variables available to client-side code
# 5. No VITE_ prefix: Server-side only (kept secret)
# 6. Production: Use proper secrets management (Railway secrets, Vercel env vars, etc.)
